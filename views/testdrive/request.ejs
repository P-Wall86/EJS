<h1><%= title %></h1>

<% if (errors && !errors.isEmpty()) { %>
    <ul class="flash-messages">
        <% errors.array().forEach(error => { %>
            <% if (error.msg !== 'Invalid value') { %>
                <li><%= error.msg %></li>
            <% } %>
        <% }) %>
    </ul>
<% } %>

<% if (flashMessages && flashMessages.success) { %>
    <div class="alert-success"><%= flashMessages.success %></div>
<% } %>

<% if (flashMessages && flashMessages.error) { %>
    <div class="alert-error"><%= flashMessages.error %></div>
<% } %>

<form action="/testdrive/request" method="POST" class="register-form testdrive-form">
    <label>Vehicle Name</label>
    <p><%= formData.vehicle_name || "Unknown Vehicle" %></p>

    <!-- AquÃ­ el hidden cambia a inv_id para que coincida con la base -->
    <input type="hidden" id="inv_id" name="inv_id" value="<%= formData.inv_id %>" />

    <label for="preferred_date">Preferred Date</label>
    <input type="date" id="preferred_date" name="preferred_date" required
        value="<%= formData.preferred_date || '' %>"
        min="<%= new Date().toISOString().split('T')[0] %>"
        title="Select a preferred date (today or later)" />

    <label for="comment">Comments</label>
    <textarea id="comment" name="comment" rows="4" placeholder="Any additional information or requests"><%= formData.comment || '' %></textarea>

    <button type="submit" class="testdrive-btn">Submit Request</button>
</form>